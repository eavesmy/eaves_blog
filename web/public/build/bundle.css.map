{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../Home.svelte",
    "../../Login.svelte"
  ],
  "sourcesContent": [
    "<script>\n\texport let Title;\n\n\timport { onMount } from 'svelte';\n\timport moment from 'moment';\n\n\timport Modal from './Modal.svelte';\n\timport C_Img from './lib/Img.svelte';\n\timport C_Music from './lib/Music.svelte';\n\n\timport { Post } from './lib/net.js';\n\timport { Host, Path_Index, Path_Info } from './lib/const.js';\n\n\tlet _root = \"\";\n\tlet _total = 0;\n\tlet _size = \"0 MB\";\n\tlet _data = [];\n\tlet _locate = \"\";\n\tlet _localCount = 0;\n\n\tlet C_Default = C_Music; // 写一个 default 的组件\n\n\tlet History = [];\n\n\tlet Select = {\n\t\tFileName: \"\",\n\t\tType: \"\",\n\t\tComponent: C_Default,\n\t\tFilePath: \"\",\n\t};\n\t\n\tonMount(async function(){\n\t\tmoment.locale(\"cn\");\n\t\tawait GetIndex();\n\t});\n\n\tfunction getQueryString(name){\n\n\t\tlet q = location.search;\n\n\t\tif (q.indexOf(\"?\") === -1) return \"\";\n\t\tlet strs = q.substr(1).split(\"&\");\n\t\tfor(let item of strs) {\n\t\t\tlet d = item.split(\"=\");\n\t\t\tif(d[0] === name) return decodeURI(d[1]);\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tasync function GetIndex(){\n\n\t\tlet subPath = getQueryString(\"location\") || \"\";\n\t\tif(subPath == \"/\") subPath = \"\";\n\n\t\tlet res = await Post(Host + Path_Info);\n\t\t_root = res.Data.Root;\n\t\t_total = res.Data.Total;\n\t\t_size = (res.Data.Size / 8 / 1024 / 1024).toFixed(2) + \" MB\" || \"0 MB\";\n\n\t\tres = await Post(Host + Path_Index,{\n\t\t\tPath: _root + subPath,\n\t\t});\n\n\t\t_localCount = 0;\n\t\tfor(let item of res.Data) {\n\t\t\t_localCount ++;\n\t\t\titem.LastModify = moment(item.LastModify).format(\"YYYY-MM-DD hh:mm:ss\");\n\t\t\titem.Size = (item.Size / 8 / 1024 / 1024).toFixed(2) + \" MB\";\n\n\t\t\tif(!item.IsDir) {\n\t\t\t\titem.Type = item.FileName.substr(item.FileName.lastIndexOf(\".\") + 1);\n\t\t\t}\n\t\t}\n\t\tif(!!subPath) {\n\t\t\tlet qs = subPath.split(\"/\");\n\t\t\tlet q = qs.splice(0,qs.length - 1).join(\"/\");\n\t\t\tres.Data.unshift({\n\t\t\t\tFileName: \"../\",\n\t\t\t\tIsDir: true,\n\t\t\t\tLastModify: \"\",\n\t\t\t\tPath: _root + q,\n\t\t\t\tSize: \"\",\n\t\t\t\tType: \"\"\n\t\t\t})\n\t\t}\n\t\t_data = res.Data;\n\t}\n\n\tfunction Jump(){\n\t\tconst $this = this;\n\t\tlet isDir = $this.getAttribute(\"data-isDir\");\n\t\tlet fileName = $this.getAttribute(\"data-fileName\");\n\t\tSelect = JSON.parse($this.getAttribute(\"data\"));\n\n\t\tif(isDir && isDir !== \"false\") {\n\t\t\tlet _path = Select.Path.split(\"/\");\n\n\t\t\tif(fileName !== \"../\") _path.push(fileName);\n\n\t\t\t_locate  = _path.splice(3,_path.length).join(\"/\");\n\n\t\t\thistory.pushState({},\"网盘 \" + fileName,\"?location=/\" + _locate);\n\t\t\tGetIndex();\n\t\t} else {\n\t\t\tSelect.Type = (fileName.split(\".\").reverse())[0];\n\t\t\tSelect.FilePath = Select.Path + \"/\" + fileName ;\n\n\t\t\tif([\"jpg\",\"png\",\"jpge\"].indexOf(Select.Type)) {\n\t\t\t\tSelect.Component = C_Img;\n\t\t\t}\n\t\t\tif(Select.Type == \"mp3\") Select.Component = C_Music;\n\t\t\tconsole.log(Select.Component);\n\n\t\t\tdocument.querySelector(\"#modal\").className += \" is-active\";\n\t\t\t// TODO: 打开预览\n\t\t}\n\t}\n\n\tfunction SelectAll(){\n\t\tlet boxs = document.querySelectorAll(\".checkbox\");\n\n\t\tfor(let box of boxs) {\n\t\t\tbox.checked = !box.checked;\n\t\t}\n\t}\n\n</script>\n\n<main>\n\t<div class=\"card\">\n\t\t<header class=\"card-header\">\n\t\t\t<p class=\"title\">{Title}</p>\n\t\t</header>\n\t\t<div class=\"card-content\">\n\t\t\t<div class=\"field\">\n\t\t\t\t<p>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t根目录: {_root}\n\t\t\t\t\t</span>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t共 {_total} 个文件 {_size}\n\t\t\t\t\t</span>\n\t\t\t\t</p>\n\t\t\t\t<!--\n\t\t\t\t<p>\n\t\t\t\t\t<button class=\"button is-success\" on:click={SelectAll}>全选/反选</button>\n\t\t\t\t</p>\n\t\t\t\t-->\n\t\t\t\t<p>\n\t\t\t\t\t当前页文件数量: {_localCount}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div class=\"field\">\n\t\t\t\t<table class=\"table is-fullwidth\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t<th>格式</th>\n\t\t\t\t\t\t<th>文件名</th>\n\t\t\t\t\t\t<th>大小</th>\n\t\t\t\t\t\t<th>操作</th>\n\t\t\t\t\t\t<th>修改日期</th>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{#each _data as item}\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t\t<td> \n\t\t\t\t\t\t\t\t\t<span class=\"{!item.IsDir? 'button is-info is-small':''}\" >\n\t\t\t\t\t\t\t\t\t\t{item.Type}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t    <td>\n\t\t\t\t\t\t\t\t\t<a href=\"javascript:void(0)\" on:click={Jump} data-fileName={item.FileName} data-isDir={item.IsDir} data={JSON.stringify(item)}> {item.FileName} </a>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t{item.Size}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<div class=\"control\">\n\t\t\t\t\t\t\t\t\t\t<button class=\"button is-default is-small\">重命名</button>\n\t\t\t\t\t\t\t\t\t\t<button class=\"button is-default is-small\">删除</button>\n\t\t\t\t\t\t\t\t\t\t<button class=\"button is-default is-small\">移动到</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>{item.LastModify}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<Modal {...Select}/>\n</main>\n\n<style>\n\theader {\n\t\tpadding: 20px 5vw;\n\t}\n</style>\n",
    "<script>\n\t\n\timport md5 from 'md5';\n\timport { Host,Path_Login, _ } from './lib/const.js';\n\timport { Post } from './lib/net.js';\n\timport { navigate } from \"svelte-routing\";\n\t\n\tlet pwd = \"\";\n\tlet crypted = \"\";\n\n\tasync function Login(){\n\t\tlet res = await Post(Host + Path_Login,{\n\t\t\t'pwd': crypted\n\t\t});\n\t\t\n\t\tif(res.Msg === \"success\") {\n\t\t\tnavigate(\"/\",{replace: true});\n\t\t}\n\t}\n\t\n\tfunction Encode(){\n\t\tcrypted = md5(pwd);\n\t}\n\n</script>\n\n<main>\n\t<div id=\"contain\">\n\t\t<div class=\"box\">\n\t\t\t<div class=\"field\">\n\t\t\t\t<label class=\"label\" for=\"\">\n\t\t\t\t\t密钥\n\t\t\t\t</label>\n\t\t\t\t<div class=\"control\">\n\t\t\t\t\t<input class=\"input\" type=\"password\" bind:value={pwd} on:keyup={Encode}/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"field\">\n\t\t\t\t<div class=\"control\">\n\t\t\t\t\t<button class=\"button is-success\" on:click={Login}>\n\t\t\t\t\t\t登陆\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</main>\n\n<style>\n\t#contain {\n\t\twidth: 500px;\n\t\tmargin: 0 auto;\n\t\tmargin-top: 10%;\n\t}\n</style>\n"
  ],
  "names": [],
  "mappings": "AAsMC,MAAM,cAAC,CAAC,AACP,OAAO,CAAE,IAAI,CAAC,GAAG,AAClB,CAAC;ACvJD,QAAQ,cAAC,CAAC,AACT,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,CAAC,CAAC,IAAI,CACd,UAAU,CAAE,GAAG,AAChB,CAAC"
}